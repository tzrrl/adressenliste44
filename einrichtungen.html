<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Einrichtungsverzeichnis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: Die Anwendung ist als interaktives Dashboard konzipiert. Oben befinden sich zentrale Filter- und Suchfunktionen (nach Name, Träger und Stadt). Darunter wird in einem separaten Bereich das nächste Ereignis statisch angezeigt. Der Hauptbereich listet die Einrichtungen als einzelne Karten auf. Diese Struktur wurde gewählt, um Benutzern einen schnellen Überblick über kommende Ereignisse zu ermöglichen, während sie gleichzeitig eine detaillierte, gefilterte Suche durchführen können. Die Interaktionen (Suche, Filter) aktualisieren die Kartenliste in Echtzeit. -->
    <!-- Visualization & Content Choices: 1. Adressliste -> Ziel: Organisieren/Informieren -> Präsentation: Interaktive Karten in einem Grid-Layout -> Interaktion: Die Liste wird über Textsuche und Dropdown-Menüs gefiltert. Begründung: Karten sind visuell ansprechender und auf mobilen Geräten besser lesbar. Methode: HTML/CSS mit Tailwind, dynamisch gerendert durch JavaScript. 2. Nächstes Ereignis -> Ziel: Informieren -> Präsentation: Statisches Infofeld mit Datum und Name, plus ein Button zur Buchung -> Interaktion: Keine. Begründung: Stellt wichtige Informationen prominent dar, ohne die Filterfunktion zu überladen. Methode: JavaScript zum Finden des nächsten Datums und dynamischem Anzeigen im HTML. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfdfc;
            color: #333;
        }
        .card {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
            will-change: transform;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Einrichtungen Verbund 44</h1>
        </header>

        <main>
            <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mb-8 border border-gray-200">
                <p class="text-gray-700 mb-4">
                    Nutzen Sie die Such- und Filteroptionen, um die Liste der Einrichtungen zu durchsuchen. Die Kartenliste wird bei jeder Änderung automatisch aktualisiert, um Ihnen stets die relevantesten Informationen anzuzeigen.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <input type="search" id="searchInput" placeholder="Suche nach Name, Ansprechpartner..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition">
                    <select id="orgFilter" class="w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition">
                        <option value="">Alle Träger</option>
                    </select>
                    <select id="cityFilter" class="w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition">
                        <option value="">Alle Städte</option>
                    </select>
                </div>
            </div>

            <div id="nextEventInfo" class="bg-amber-50 rounded-lg shadow-md p-4 sm:p-6 mb-8 border border-amber-200 flex flex-col md:flex-row justify-between items-center text-center md:text-left transition-all duration-300">
                <div class="text-gray-800">
                    <strong class="font-semibold">Nächstes Ereignis:</strong> <span id="eventDetails"></span>
                </div>
                <a href="https://calendar.app.google/qeouSVmUWJN5S9E49" class="mt-4 md:mt-0 px-6 py-2 bg-amber-500 text-white font-semibold rounded-lg shadow-md hover:bg-amber-600 transition">Buchungsseite</a>
            </div>

            <section id="results" class="bg-gray-50 p-4 sm:p-6 rounded-lg border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Einrichtungen</h2>
                <div id="resultsGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                </div>
            </section>

        </main>
    </div>

    <script>
        const data = [
            { name: "Rüstkäuer Rasselbande", org: "Stadt Schüttorf", contacts: "Nicole Beitzel (L) / Steffi Schraten", address: "Rüstkau 2, 48465 Schüttorf", date: "2023-11-20" },
            { name: "Haus des Kindes", org: "Stadt Lingen", contacts: "Almut Kewitz (L) / Doris Roß", address: "Werner-von-Siemens-Straße 21, 49808 Lingen", date: "2023-11-25" },
            { name: "Heideweg", org: "Rappelkiste", contacts: "Anne Zinke (L) / Anne Zinke", address: "Heideweg 10, 48529 Nordhorn", date: "2023-11-20" },
            { name: "denn kläijnen Hoff", org: "Rappelkiste", contacts: "Christian Pump (L) / Anne Kotman", address: "Döppersweg 11, 48531 Nordhorn", date: "2023-12-01" },
            { name: "St. Michael", org: "kath.", contacts: "Anna Ginten (L) / Andrea Tix-Knoll", address: "Langschmidtsweg 66 a, 49808 Lingen", date: "2023-11-25" },
            { name: "St. Barbara", org: "kath.", contacts: "Hanne Kohne (L) / Nikola Hofschlag", address: "Thüringer Straße 27, 49809 Lingen", date: "2023-12-05" },
            { name: "St. Antonius", org: "kath.", contacts: "Kerstin Lüken-Stoke (L)", address: "Kirchenkamp 14, 49811 Lingen", date: "2023-12-10" },
            { name: "Sonnenwald", org: "K.I.T.A. gGmbH", contacts: "Imke Wolf (L) / Carolina Fillinger", address: "Wilhem Rabe Straße 54, 48527 Nordhorn", date: "2023-11-20" },
            { name: "Wirbelwind", org: "K.I.T.A. gGmbH", contacts: "Nicole Lüthe (L) / Gudrun Koop", address: "Von Behring Straße 7, 48529 Nordhorn", date: "2025-09-18" },
            { name: "Mauerstraße", org: "ev-ref.", contacts: "Berndine Kethorn (L) / Daniela Brünemeyer", address: "Mauerstraße 44, 48465 Schüttorf", date: "2023-12-05" },
            { name: "Wietkampstrolche", org: "ev-ref.", contacts: "Sandra Kuhlmann (L) / Stefanie Fischer", address: "Bauweg 13, 48465 Schüttorf", date: "2023-12-10" },
            { name: "Kita Lutherherz", org: "ev-luth. Gemeinde", contacts: "Sabrina Beer (L) / Nadine Kip", address: "Bäumerstraße 16, 49808 Lingen", date: "2023-11-25" },
            { name: "Joahneskita", org: "ev-luth. Gemeinde", contacts: "Ulrike Pötter (L) / Gabi Lefers", address: "Prinzenstraße 15, 49828 Neuenhaus", date: "2023-12-01" },
            { name: "Trinitatis", org: "ev-luth. Gemeinde", contacts: "Daniel Fleddermann(L) / Ortun Elison", address: "Kuckuckstraße 23, 49808 Lingen", date: "2023-12-05" },
            { name: "Arche Noah", org: "ev-luth. Gemeinde", contacts: "Sarah Hauptmeier (L) / Rita Spieker", address: "Westersand 3, 49824 Emlichheim", date: "2023-12-10" },
            { name: "Schatzkiste", org: "DRK", contacts: "Sigrid Jakobs (L) / Claudia Herms", address: "Schillerstraße 27, 48465 Schüttorf", date: "2023-11-20" },
            { name: "Kita Amselstrolche", org: "K.I.T.A. gGmbH", contacts: "Patrick Spannhoff (FBSK)", address: "Amselstraße 3, 49843 Uelsen", date: "2025-10-15" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('searchInput');
            const orgFilter = document.getElementById('orgFilter');
            const cityFilter = document.getElementById('cityFilter');
            const resultsGrid = document.getElementById('resultsGrid');
            const eventDetails = document.getElementById('eventDetails');

            const getCityFromAddress = (address) => {
                const match = address.match(/\d{5}\s(.+)/);
                return match ? match[1] : 'Unbekannt';
            };

            const organizations = [...new Set(data.map(item => item.org))];
            organizations.sort().forEach(org => {
                const option = document.createElement('option');
                option.value = org;
                option.textContent = org;
                orgFilter.appendChild(option);
            });
            
            const cities = [...new Set(data.map(item => getCityFromAddress(item.address)))];
            cities.sort().forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                cityFilter.appendChild(option);
            });

            function findNextEvent() {
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const upcomingEvents = data.filter(item => new Date(item.date) >= today);
                if (upcomingEvents.length === 0) {
                    eventDetails.textContent = 'Aktuell keine kommenden Ereignisse.';
                    return;
                }
                upcomingEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
                const nextEvent = upcomingEvents[0];
                eventDetails.textContent = `${nextEvent.name} am ${new Date(nextEvent.date).toLocaleDateString('de-DE')}`;
            }

            function renderResults(filteredData) {
                resultsGrid.innerHTML = '';
                if (filteredData.length === 0) {
                    resultsGrid.innerHTML = '<p class="text-gray-500 md:col-span-2 xl:col-span-3 text-center">Keine Einrichtungen für die aktuelle Auswahl gefunden.</p>';
                } else {
                    filteredData.forEach(item => {
                        const card = document.createElement('div');
                        card.className = 'card p-5 rounded-lg';
                        card.innerHTML = `
                            <h3 class="text-lg font-bold text-gray-800">${item.name}</h3>
                            <p class="text-sm text-amber-700 font-medium my-1">${item.org}</p>
                            <p class="text-gray-600 mt-2"><strong>Ansprechpartner:</strong> ${item.contacts}</p>
                            <p class="text-gray-600 mt-1"><strong>Adresse:</strong> ${item.address}</p>
                        `;
                        resultsGrid.appendChild(card);
                    });
                }
            }

            function filterAndRender() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedOrg = orgFilter.value;
                const selectedCity = cityFilter.value;

                const filteredData = data.filter(item => {
                    const nameMatch = item.name.toLowerCase().includes(searchTerm);
                    const contactsMatch = item.contacts.toLowerCase().includes(searchTerm);
                    const orgMatch = !selectedOrg || item.org === selectedOrg;
                    const cityMatch = !selectedCity || getCityFromAddress(item.address) === selectedCity;

                    return (nameMatch || contactsMatch) && orgMatch && cityMatch;
                });

                renderResults(filteredData);
            }

            searchInput.addEventListener('input', filterAndRender);
            orgFilter.addEventListener('change', filterAndRender);
            cityFilter.addEventListener('change', filterAndRender);

            findNextEvent();
            filterAndRender();
        });
    </script>
</body>
</html>


